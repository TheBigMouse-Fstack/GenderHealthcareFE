<app-header />
<body class="w-full bg-[#f8f8f8] py-[3rem]">
  @defer (when !loading()) { @if (errorMsg(); as err) {
  <div class="text-center py-16 text-red-600">
    <p class="text-lg">{{ err }}</p>
  </div>
  } @else {
  <div class="max-w-7xl mx-auto px-6">
    <!-- Banner -->
    <div
      class="h-[14rem] rounded-3xl px-6 flex items-center bg-cover bg-center mb-8"
      style="background-image: url('./loginBg.png')"
    >
      <img
        [src]="getImageUrl(doctor()?.staff_members?.image_link)"
        class="w-32 h-32 rounded-full border-4 border-white object-cover shadow-lg mr-6 z-10"
        alt="Doctor Avatar"
      />
      <div class="flex-1 z-10">
        <h2 class="text-4xl font-extrabold text-white mb-2">
          {{ doctorName }}
        </h2>
        <div
          class="flex flex-wrap gap-4 text-base text-[#e2e2e2] font-medium items-center"
        >
          <div class="flex items-center gap-2">
            <!-- Email Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.8"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 5h18M3 5l9 6 9-6M3 5v14h18V5"
              />
            </svg>
            <span>{{ doctor()?.staff_members?.working_email }}</span>
          </div>
          <div class="flex items-center gap-2 capitalize">
            <!-- Gender Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.8"
            >
              <circle cx="12" cy="7" r="4" />
              <path d="M5 21v-2a7 7 0 0114 0v2" />
            </svg>
            <span>{{ doctor()?.staff_members?.gender }}</span>
          </div>
          <div class="flex items-center gap-2">
            <!-- Clock Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.8"
            >
              <circle cx="12" cy="12" r="10" />
              <path
                d="M12 6v6l4 2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span
              >{{ doctor()?.staff_members?.years_experience }} years exp</span
            >
          </div>
          <div class="flex items-center gap-2 capitalize">
            <!-- Specialty Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.8"
            >
              <path
                d="M3 10h18M3 10v10h18V10M10 10V3h4v7"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>{{ doctor()?.speciality?.replaceAll("_", " ") }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div
      class="border-b border-gray-300 flex gap-6 text-base font-semibold mb-6"
    >
      <button
        (click)="activeTab = 'about'"
        [ngClass]="{
          'border-b-2 border-blue-600 text-blue-600': activeTab === 'about',
          'text-gray-600 hover:text-blue-600': activeTab !== 'about'
        }"
        class="pb-2 transition"
      >
        Giới thiệu
      </button>
      <button
        (click)="activeTab = 'license'"
        [ngClass]="{
          'border-b-2 border-blue-600 text-blue-600': activeTab === 'license',
          'text-gray-600 hover:text-blue-600': activeTab !== 'license'
        }"
        class="pb-2 transition"
      >
        Giấy phép hành nghề
      </button>
    </div>

    <!-- Tab Content -->
    @switch (activeTab) { @case ('about') {
    <div class="space-y-8 text-[#5c5270]">
      <div>
        <h3 class="text-2xl font-bold text-[#192f4e] mb-2">About Me</h3>
        <p class="text-lg">
          {{ doctor()?.about_me?.description }}
        </p>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-[#192f4e] mb-2">Experience</h3>
        <p class="text-lg">
          {{ doctor()?.about_me?.experience }}
        </p>
      </div>
    </div>
    } @case ('license') {
    <div
      class="relative border-4 border-blue-500 bg-white text-black px-8 py-6 rounded-lg shadow max-w-xl mx-auto"
      style="font-family: 'Times New Roman', serif"
    >
      <div class="text-center mb-4">
        <p class="uppercase font-semibold text-sm">
          CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM
        </p>
        <p class="text-sm">Độc lập - Tự do - Hạnh phúc</p>
        <div class="w-16 border-t border-black mx-auto my-2"></div>
      </div>
      <h2 class="text-center text-2xl font-bold mb-6 underline">
        GIẤY PHÉP HÀNH NGHỀ Y
      </h2>
      <div class="space-y-4 text-lg">
        <div class="flex">
          <span class="w-36 font-semibold">Họ tên:</span>
          <span class="flex-1"
            >Bác sĩ {{ doctor()?.staff_members?.full_name }}</span
          >
        </div>
        <div class="flex">
          <span class="w-36 font-semibold">Số giấy phép:</span>
          <span class="flex-1">{{ doctor()?.license_no }}</span>
        </div>
        <div class="flex">
          <span class="w-36 font-semibold">Chuyên khoa:</span>
          <span class="flex-1 capitalize">
            {{ doctor()?.speciality?.replaceAll("_", " ") }}
          </span>
        </div>
      </div>
      <img
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Emblem_of_Vietnam.svg/1200px-Emblem_of_Vietnam.svg.png"
        class="absolute opacity-10 w-64 h-64 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none"
        alt="Quốc huy Việt Nam"
      />
    </div>
    } }
  </div>
  } } @loading {
  <div class="max-w-7xl m-auto px-6 py-16 animate-pulse">
    <!-- Loading Skeleton here -->
  </div>
  }
</body>
<app-footer />
